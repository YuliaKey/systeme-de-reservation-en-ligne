### Variables globales
@baseUrl = http://localhost:3001/api
@token = my_clerk_jwt_token_here

### Health Check
GET http://localhost:3001/health

###############################################
# AUTHENTICATION
###############################################

### Get Current Session
GET {{baseUrl}}/auth/session
Authorization: Bearer {{token}}

###############################################
# USERS
###############################################

### Get My Profile
GET {{baseUrl}}/users/me
Authorization: Bearer {{token}}

### Update My Profile
PUT {{baseUrl}}/users/me
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "fullName": "Nouveau Nom",
  "preferences": {
    "language": "fr",
    "notifications": true
  }
}

### Delete My Account
DELETE {{baseUrl}}/users/me
Authorization: Bearer {{token}}

###############################################
# RESOURCES
###############################################

### List All Resources
GET {{baseUrl}}/resources
Authorization: Bearer {{token}}

### List Resources with Filters
GET {{baseUrl}}/resources?capacity=6&location=Paris&amenities=wifi,ecran
Authorization: Bearer {{token}}

### Get Resource Detail
GET {{baseUrl}}/resources/resource_id_here
Authorization: Bearer {{token}}

### Get Resource Availability
GET {{baseUrl}}/resources/resource_id_here/availability?startTime=2026-01-20T09:00:00Z&endTime=2026-01-20T18:00:00Z
Authorization: Bearer {{token}}

### Create Resource (Admin Only)
POST {{baseUrl}}/resources
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Nouvelle Salle",
  "description": "Description de la salle",
  "capacity": 8,
  "location": "Paris 11ème",
  "imageUrl": "https://example.com/image.jpg",
  "availabilityRules": {
    "minDuration": 30,
    "maxDuration": 480,
    "daysOfWeek": [1, 2, 3, 4, 5],
    "timeRanges": [
      { "start": "09:00", "end": "18:00" }
    ]
  },
  "status": "available"
}

### Update Resource (Admin Only)
PUT {{baseUrl}}/resources/resource_id_here
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Salle Modifiée",
  "capacity": 10,
  "status": "available"
}

### Delete Resource (Admin Only)
DELETE {{baseUrl}}/resources/resource_id_here
Authorization: Bearer {{token}}

###############################################
# RESERVATIONS
###############################################

### List My Reservations
GET {{baseUrl}}/reservations
Authorization: Bearer {{token}}

### List My Reservations with Filters
GET {{baseUrl}}/reservations?status=active&from=2026-01-01T00:00:00Z&to=2026-02-01T00:00:00Z
Authorization: Bearer {{token}}

### Get My Reservation History
GET {{baseUrl}}/reservations/history
Authorization: Bearer {{token}}

### Create Reservation
POST {{baseUrl}}/reservations
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "resourceId": "resource_id_here",
  "startTime": "2026-01-22T10:00:00Z",
  "endTime": "2026-01-22T12:00:00Z",
  "notes": "Réunion importante"
}

### Get Reservation Detail
GET {{baseUrl}}/reservations/reservation_id_here
Authorization: Bearer {{token}}

### Update Reservation
PUT {{baseUrl}}/reservations/reservation_id_here
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "startTime": "2026-01-22T14:00:00Z",
  "endTime": "2026-01-22T16:00:00Z",
  "notes": "Réunion reportée"
}

### Cancel Reservation
DELETE {{baseUrl}}/reservations/reservation_id_here
Authorization: Bearer {{token}}

###############################################
# ADMIN
###############################################

### List All Reservations (Admin Only)
GET {{baseUrl}}/admin/reservations
Authorization: Bearer {{token}}

### List All Reservations with Filters (Admin Only)
GET {{baseUrl}}/admin/reservations?status=active&resourceId=resource_id_here&userId=user_id_here
Authorization: Bearer {{token}}

### Get Specific Reservation (Admin Only)
GET {{baseUrl}}/admin/reservations/reservation_id_here
Authorization: Bearer {{token}}

### Delete Reservation Permanently (Admin Only)
DELETE {{baseUrl}}/admin/reservations/reservation_id_here
Authorization: Bearer {{token}}

### Get Statistics (Admin Only)
GET {{baseUrl}}/admin/statistics
Authorization: Bearer {{token}}

### Get Statistics with Date Range (Admin Only)
GET {{baseUrl}}/admin/statistics?startDate=2026-01-01T00:00:00Z&endDate=2026-01-31T23:59:59Z
Authorization: Bearer {{token}}

### Update Past Reservations (Admin Maintenance)
POST {{baseUrl}}/admin/maintenance/update-past-reservations
Authorization: Bearer {{token}}

###############################################
# ADMIN - EMAIL TESTING & LOGS
###############################################

### Send Test Email (Admin Only)
POST {{baseUrl}}/admin/test-email
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "email": "test@example.com"
}

### Get All Email Logs (Admin Only)
GET {{baseUrl}}/admin/email-logs
Authorization: Bearer {{token}}

### Get Failed Emails (Admin Only)
GET {{baseUrl}}/admin/email-logs?status=failed
Authorization: Bearer {{token}}

### Get Sent Emails (Admin Only)
GET {{baseUrl}}/admin/email-logs?status=sent&limit=20
Authorization: Bearer {{token}}
